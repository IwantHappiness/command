# Настройка git под себя

`git config` - утилита для просмотра и настройки всех аспектах для работы с git. #GitConfig  
 ├── `--list` - проверка используемой конфигурации, показывает все настройки git. #GitShowConfig  
 ├── `--system` - содержит значение для всех пользователей, для изменения потребуется права админа.  
 ├── `--global` - хранит права настройки конкретно юзера и применяться ко **всем** репозиториям в текущей системе.  
 └── `--local` - хранить настройки конкретного реп. применяться по дефолту.   
 
Первое, что вам следует сделать после установки Git — указать ваше имя и адрес электронной почты. Это важно, потому что каждый  
коммит в Git содержит эту информацию, и она включена в коммиты, передаваемые вами, и не может быть далее изменена:  
	`git config` _Oпция_ `user.name` "_Имя_" - указывает имя юзера. #GitAddNameConfig  
	`git config` _Oпция_ `user.email` "_Почта_" - указывает почту юзера. #GitAddEmailConfig  

`git config --global core.editor` _Название_ - выбор редактора для набора сообщения. #GitAddEditorConfig  
`git config --global init.defaultBranch` _Название_ - выбор ветки по дефолту. #GitAddBranchNameConfig  

---
## Инициализация репозитория

`git init` - инициализация репозитория. #GitInitRep 

---
## Клонирование репозитория

`git clone` _Название репы_ - клонирование репы в текущем каталоге. #GitCLone  
 ├── `clone` _Название репы_ _Имя_ - клонирование репы с отличающимся названием каталога. #GitCloneRename  
 └── `--depth` - клонирует репозиторий без истории коммитов. #GitCloneDepth  
 
---
## Помощь

`git help` _Команда_ - открывает руководство в браузере. #GitHelp  
 └── `git` _Команда_ `-h` - выводит список опций в терминал. #GitHelpOption

`git --version` - просмотр версии установленной версии git.  

---
## Состояние файлов

#GitFilesStateRules
Статусы файлов:
- Staged - файл индексируется.
- Modified - файл изменен.
- Unmodified - файл не изменен.
- Untracked - Файл не отслеживается.

`git add` _Файл или папка_ - индексировать файл.  #GitAddFileStaged  
 └── `git add .` - индексировать **все** файлы.  #GitAddAllFileStaged  
 
`git status` - определяет какие файлы в каком состоянии. #GitStatus  
 └── `status -s` - выводит более краткую информацию. #GitStatusShort  

`git rm` _Файл или папка_ - удалит его из индекса и из каталога, принимает glob шаблоны. #GitRm  
 ├── `-f` _Файл или папка_ - принудительное удаление.  
 └── `--cached` _Файл или папка_  - удаляет из индекса но сохраняет файл в каталоге. #GitRmCached  

---
## Игнорирование файлов

Создать файл `.gitignore` с перечислением шаблонов соответствующих таким файлам. #GitIgnoreFiles  

#GitIgnoreRules  
К шаблонам в файле `.gitignore` применяются следующие правила:
- Пустые строки, а также строки, начинающиеся с `#`, игнорируются.
- Стандартные шаблоны являются глобальными и применяются рекурсивно для всего дерева каталогов.
- Чтобы избежать рекурсии используйте символ слеш `/` в начале шаблона.
- Чтобы исключить каталог добавьте слеш `/` в конец шаблона.
- Можно инвертировать шаблон, использовав восклицательный знак `!` в качестве первого символа.

Glob-шаблоны представляют собой упрощённые регулярные выражения, используемые командными интерпретаторами. Символ (`*`) соответствует 0 или более символам; последовательность `[abc]` —
любому символу из указанных в скобках (в данном примере a, b или c); знак вопроса (`?`) соответствует одному символу; и квадратные скобки, в которые заключены символы, разделённые
дефисом (`[0-9]`), соответствуют любому символу из интервала (в данном случае от 0 до 9). Вы также можете использовать две звёздочки, чтобы указать на вложенные каталоги:
`a/**/z` соответствует `a/z`, `a/b/z`, `a/b/c/z`, и так далее.

Вот ещё один пример файла `.gitignore`:

```
# Исключить все файлы с расширением .a
*.a

# Но отслеживать файл lib.a даже если он подпадает под исключение выше
!lib.a

# Исключить файл TODO в корневом каталоге, но не файл в subdir/TODO
/TODO

# Игнорировать все файлы в каталоге build/
build/

# Игнорировать файл doc/notes.txt, но не файл doc/server/arch.txt
doc/*.txt

# Игнорировать все .txt файлы в каталоге doc/
doc/**/*.txt
```

---
## Просмотр изменений

`git diff` - для просмотра не проиндексированных изменений. #GitDiff 
 └── `--staged` - сравнивает ваши проиндексированные изменения с последним коммитом.  
 
 ---
## Коммит изменений 

`git commit` - откроет выбранный вами текстовый редактор. #GitCreateCommit  
 ├── `-m` _Название коммита_ - фиксация изменений. #GitCreateCommitShort  
 ├── `-v` - в комментарий будет также помещена дельта/diff изменений. #GitCreateCommitDetailed  
 └── `--amend` - вносит в коммит файлы которые были добавлены в staged после коммита. #GitCommitAmend  
 
В редакторе будет отображён следующий текст (это пример окна Vim):

```
# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
# Your branch is up-to-date with 'origin/master'.
#
# Changes to be committed:
#	new file:   README
#	modified:   CONTRIBUTING.md
#
~
~
~
".git/COMMIT_EDITMSG" 9L, 283C
```

По умолчанию для коммита содержит закомментированный результат работы команды git status и ещё одну пустую строку сверху.  
Вы можете удалить эти комментарии и набрать своё сообщение или же оставить их для напоминания о том, что вы фиксируете.

`git restore` _Файл_ - откатывает файл до состояния последнего коммита. #GitRestoreFile  
 └── `--staged` - отмена индексации файла. #GitRestoreStaged  

---
## Просмотр истории коммитов

Вы можете использовать `-<n>`, где n — это любое натуральное число и представляет собой n последних коммитов.  

`git log` - показывает историю коммитов. #GitLog  
 ├── `-(n)` - показывает только последние n коммитов.  
 ├── `-S` - показывает только коммиты, в которых изменение в коде повлекло за собой добавление или удаление указанной строки. #GitLogS  
 ├── `--stat` - показывает сокращенную статистику для каждого коммита и  суммарную таблицу изменений. #GiltLogStat  
 ├── `--grep` - показывает только коммиты, сообщение которых содержит указанную строку. #GitLogGrep  
 ├── `--graph` - показывает ASCII граф с ветвлениями и историей слияний. #GitLogGraph  
 ├── `--author` - Показывает только те коммиты, в которых запись author совпадает с указанной строкой. #GitLogAuthor  
 ├── `--since`, `--after` - показывает только те коммиты, которые были сделаны после указанной даты. #GitLogAfter  
 ├── `--until`, `--before` - показывает только те коммиты, которые были сделаны до указанной даты. #GitLogBefore  
 ├── `--committer` - показывает только те коммиты, в которых запись committer совпадает с указанной строкой. #GitLogCommitter  
 ├── `--shortstat` - показывает только строку с количеством изменений/вставок/удалений для команды --stat. #GitLogShortStat  
 ├── `--name-only` - показывает список изменённых файлов после информации о коммите. #GitLogNameOnly  
 ├── `--no-merges` - исключить коммиты слияния из вывода. #GitLogNoMerges  
 ├── `--name-status` - показывает список файлов, которые добавлены/изменены/удалены. #GitLogNameStatus  
 ├── `--abbrev-commit` - показывает только несколько символов SHA-1 чек-суммы вместо всех 40. #GitLogAbbrev  
 ├── `--relative-date` - oтображает дату в относительном формате вместо стандартного формата даты. #GitLogRelativeDate  
 ├── `--` _Путь до файла_ - ограничивает вывод только теми коммитами, в которых были изменения этих файлов. #GitLogFiles  
 ├── `-p` - показывает разницу внесенный в каждым коммит. #GitLogPatch  
 │   └── `-p -<Число>` - показывает разницу ограничив вывод количества коммитов.  
 └── `--pretty` - меняет формат вывода. #GitLogPretty  
	 ├── `--pretty=full` - выводит полную информацию. #GitLogPrettyFull  
	 ├── `--pretty=short` - выводит сокращенную информацию о коммитах. #GitLogPrettyShort  
	 ├── `--pretty=fuller` - выводит наиболее полную информацию о коммитах. #GitLogPrettyFull  
     ├── `--pretty=oneline` - выводит каждый коммит в одну строку. #GitLogPrettyOneline  
	 └── `--pretty=format` - отображает наиболее полезные опции для изменения формата. #GitLogPrettyFormat  

Пример использования `git log --pretty=format:`  

```
$ git log --pretty=format:"%h - %an, %ar : %s"
ca82a6d - Scott Chacon, 6 years ago : Change version number
085bb3b - Scott Chacon, 6 years ago : Remove unnecessary test
a11bef0 - Scott Chacon, 6 years ago : Initial commit
```


Полезные опции для `git log --pretty=format:`  

| Опция | Описание вывода                                             |
| ----- | ----------------------------------------------------------- |
| %H    | Хеш коммита                                                 |
| %h    | Сокращённый хеш коммита                                     |
| %T    | Хеш дерева                                                  |
| %t    | Сокращённый хеш дерева                                      |
| %P    | Хеш родителей                                               |
| %p    | Сокращённый хеш родителей                                   |
| %an   | Имя автора                                                  |
| %ae   | Электронная почта автора                                    |
| %ad   | Дата автора (формат даты можно задать опцией --date=option) |
| %ar   | Относительная дата автора                                   |
| %cn   | Имя коммитера                                               |
| %ce   | Электронная почта коммитера                                 |
| %cd   | Дата коммитера                                              |
| %cr   | Относительная дата коммитера                                |
| %s    | Содержание                                                  |

---
## Удаленный репозиторий

Для того, чтобы внести вклад в какой-либо Git-проект, вам необходимо уметь работать с удалёнными репозиториями. Взаимодействие с другими пользователями предполагает
управление удалёнными репозиториями, а также отправку и получение данных из них. Управление репозиториями включает в себя как умение добавлять новые, так и умение удалять
устаревшие репозитории, а также умение управлять различными удалёнными ветками, объявлять их отслеживаемыми или нет и так далее.

`git remote` - просмотр список настроенных удаленных репозиторий. #GitRemote  
 ├── `-v` - просмотр адресов чтения и записи привязанным к репам. #GitRemoteV  
 ├── `add` _<Краткое имя>_ _<Ссылка>_ - добавление удаленных репозиториев. #GitRemoteAdd  
 ├── `show` <_Remote_name_> - подробная информация об удаленной репе. #GitRemoteShow  
 ├── `rename` _<Remote_name>_ <_New remote name_> - переименование удаленной репы. #GitRemoteRename  
 └── `rm` <_Remote_name_> - удаление удаленной репы. #GitRemoteRemove   
 
`git fetch` <_Remote_name_> - связывается с указанным удалённым проектом и забирает все те данные проекта, которых у вас ещё нет. #GitFetch  

`git pull` - отслеживает удаленную ветку и автоматически получает данные соединяя их со своей текущей. #GitPull  

---
## Теги

Git использует два основных типа тегов: легковесные и аннотированные.

Легковесный тег — это просто указатель на определённый коммит.  

Аннотированные теги хранятся в базе данных Git как полноценные объекты. Они имеют контрольную сумму, содержат имя автора, его e-mail и дату создания, имеют комментарий  
и могут быть подписаны и проверены с помощью GNU Privacy Guard (GPG). Обычно рекомендуется создавать аннотированные теги, чтобы иметь всю перечисленную информацию.  
Eсли вы хотите сделать временную метку или по какой-то причине не хотите сохранять остальную информацию, то для этого годятся и легковесные.

`git tag` - выводит полный список тегов. #GitTag  
 ├── `-l` - выводит список по шаблону. #GitTagList  